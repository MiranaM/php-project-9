<?php
ob_start();
?>

<h1 class="mb-4">Анализатор страниц</h1>

<?php if (!empty($_SESSION['flash'])): ?>
    <div class="alert alert-info"><?= $_SESSION['flash'] ?></div>
    <?php unset($_SESSION['flash']); ?>
<?php endif; ?>

<?php $errors = $_SESSION['errors']['url'] ?? []; unset($_SESSION['errors']); ?>
<form method="post" action="/urls" class="mt-3">
    <div class="mb-3">
        <input type="text" name="url[name]" value="<?= $_SESSION['old']['name'] ?? '' ?>" class="form-control" placeholder="https://example.com">
        <?php if (!empty($errors)): ?>
            <div class="text-danger"><?= implode(', ', $errors) ?></div>
        <?php endif; ?>
    </div>
    <button type="submit" class="btn btn-primary">Проверить</button>
</form>

<?php $_SESSION['old'] = []; ?>
<?php
$content = ob_get_clean();
include __DIR__ . '/layout.phtml';
?>