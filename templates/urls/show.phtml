<?php ob_start(); ?>

<div class="container mt-5">
    <?php if (!empty($flash)): ?>
        <div class="alert alert-<?= htmlspecialchars($flash['type']) ?>">
            <?= htmlspecialchars($flash['message']) ?>
        </div>
    <?php endif ?>

    <h1 class="mb-4">Сайт: <?= htmlspecialchars($url['name']) ?></h1>

    <form method="post" action="/urls/<?= $url['id'] ?>/checks">
        <button type="submit" class="btn btn-primary">Запустить проверку</button>
    </form>

    <table class="table table-bordered mt-4">
        <tr>
            <th>ID</th>
            <td><?= $url['id'] ?></td>
        </tr>
        <tr>
            <th>Имя</th>
            <td><?= htmlspecialchars($url['name']) ?></td>
        </tr>
        <tr>
            <th>Дата создания</th>
            <td><?= (new DateTime($url['created_at']))->format('Y-m-d H:i:s') ?></td>
        </tr>
    </table>

    <h2 class="mt-4">Проверки</h2>

    <table class="table table-hover table-bordered">
        <thead>
            <tr>
                <th>ID</th>
                <th>Код ответа</th>
                <th>title</th>
                <th>h1</th>
                <th>description</th>
                <th>Дата создания</th>
            </tr>
        </thead>
        <tbody>
        <?php foreach ($checks as $check): ?>
            <tr>
                <td><?= $check['id'] ?></td>
                <td><?= $check['status_code'] ?></td>
                <td><?= htmlspecialchars($check['title']) ?></td>
                <td><?= htmlspecialchars($check['h1']) ?></td>
                <td><?= htmlspecialchars($check['description']) ?></td>
                <td><?= (new DateTime($check['created_at']))->format('Y-m-d H:i:s') ?></td>
            </tr>
        <?php endforeach ?>
        </tbody>
    </table>
</div>

<?php
$content = ob_get_clean();
include __DIR__ . '/../layout.phtml';
?>
